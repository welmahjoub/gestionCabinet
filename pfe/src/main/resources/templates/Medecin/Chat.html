<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

  <!--=============================================================================================================== -->
  <!--===========================================   Head  ============================================= -->
  <!-- =============================================================================================================== -->
  <link rel="stylesheet" type="text/css" th:href="@{/css/Style_Chat.css}" />

  <div th:include="Medecin/Include::head">

  </div>


  

  <!--=============================================================================================================== -->
  <!--===========================================  FIN head  ============================================= -->
  <!-- =============================================================================================================== -->

  <!--=============================================================================================================== -->
  <!--===========================================   body  ============================================= -->
  <!-- =============================================================================================================== -->


<body>

  <!--=============================================================================================================== -->
  <!--===========================================   Menu header   ============================================= -->
  <!-- =============================================================================================================== -->

  <div th:include="Medecin/Include::header"> </div>

  <!--=============================================================================================================== -->
  <!--===========================================   FIN menu header   ============================================= -->
  <!-- =============================================================================================================== -->


  <!--=============================================================================================================== -->
  <!--===========================================   center  ============================================= -->
  <!-- =============================================================================================================== -->

  <article  >

        <h2> <center> Chat Messages </center> </h2>
        <!--===================================================================== -->
        <!--====================  cadre   ============= -->
        <!-- ==================================================================== -->
    
      <div class="container darker"  style="width: 60% ;height:500px; ">

        <!--===================================================================== -->
        <!--====================  recherche   ============= -->
        <!-- ==================================================================== -->

        <form action="/Medecin/SearchPatient" method="post" name="f">

            <div class="input-group">
              <input type="text" class="form-control" style="width: 350px" 
                placeholder="Search" name="motCle"  onkeyup=" if (event.keyCode == 13) f.submit();"
                autofocus="autofocus" onfocus="var val=this.value; this.value=''; this.value= val;" />

              <button class="btn btn-default" type="submit">
                <i class="glyphicon glyphicon-search"></i>
              </button>
            </div>

        </form>

        <!--===================================================================== -->
        <!--====================  Liste des patients ============= -->
        <!-- ==================================================================== -->

            <br/>

            <div th:each="patient : ${patients}" >

              <div>

                  <!--===================================================================== -->
                  <!--==================== Icon contacter    ============ -->
                  <!-- ==================================================================== -->

                  <a th:href="@{/Medecin/ShowChatWithPatient(cin=${patient.cin})}"
                    style="float: right;"> 
                    <i class="fa fa-comments"  style="font-size:36px"></i>
                  </a>

                  <!--===================================================================== -->
                  <!--==================== image ,nom et deniere message du patient ======== -->
                  <!-- ==================================================================== -->

                  <img th:src="@{'/img/'+${patient.image}}"  style="width:100%;" />
                  <p>
                    <b><span th:text="${patient.nomprenom}"></span></b>
                  </p>
                  <div>
                    <span th:with="i=${patient.listChats.size()}"> 
                    <span th:with="message=${patient.listChats.get(i-1).message}"> 
                    <p><span th:text="${message}"></span></p> </span> </span>
                  </div>

              </div>

              <br/>
              <hr/>
              
            </div>

        <!--===================================================================== -->
        <!--==================== FIN  Liste des patients ============= -->
        <!-- ==================================================================== -->

      </div>

        <!--===================================================================== -->
        <!--====================  FIn cadre  ============= -->
        <!-- ==================================================================== -->

  </article>

    

  <!--=============================================================================================================== -->
  <!--===========================================  FIN  center  ============================================= -->
  <!-- =============================================================================================================== -->

</body>

  <!--=============================================================================================================== -->
  <!--===========================================   FIN body  ============================================= -->
  <!-- =============================================================================================================== -->

</html>
